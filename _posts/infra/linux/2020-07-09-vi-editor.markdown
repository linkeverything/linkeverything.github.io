---
title: "vi editor 명령어 정리"
excerpt: "vi editor commands"
categories:
  - "infra"
  - "linux"
tag:
  - "vi editor"
  - "commands"
last_modified_at: 2020-07-09
---

개발 업무를 진행하면서 vi editor 를 사용하는 일은 너무 당연한 일이 되었습니다. 서버에 따라서 명령어나 사용법에 조금씩 차이가 있으나 서버 작업을 하는 데 있어서 가장 많이 사용하는 vi editor 의 사용법에 대해서 몇 가지를 기록합니다. 학습 겸 메모 용도로 남겨두는 용도이니, 잘못된 부분은 지적해 주셔도 됩니다. 
{: .notice--info}

## 기본 사용법

#### 파일 수정 시작

아래와 같은 문법으로 파일을 editing mode 로 진입합니다. 

```bash
vi test.sh
```
#### 파일 수정 종료

vi editor에서는 마우스를 지원하지 않기 때문에, 화면이 있는 프로그램에서와 같이 어떤 명령을 내리기 위해서는 콜론(:) 을 입력하고 다음 내용을 입력합니다. 콜론(:)을 입력하면 화면의 맨 아래에 : 이 나타나고, 명령을 입력할 수 있게 됩니다.

종료를 하고 싶은 경우에는 **콜론(:)**을 누른 뒤, **q(quit)!**를 입력합니다.

```bash
:q!
```

현재까지 수정한 사항을 **저장하고 종료**하려면 **w(write, 저장)q(quit)** 를 입력합니다. 

```bash
:wq
```

#### 내용 입력하기

vi editor 에 진입하면 기본적으로는 수정 모드가 아닌, 보기 모드입니다. 이 상태에서 **i(insert)**를 입력하면 수정모드가 됩니다. 

수정 모드에서 빠져나와 다시 보기 모드로 돌아가려면 ```esc``` 키를 누르면 됩니다.


## 추가 사용법

기본 사용법만을 가지고도 파일을 수정하고 저장할 수 있습니다. 여기부터는 조금 더 편리한 기능들을 소개합니다.

#### delete 

키보드의 ```del``` 키와 동일한 역할을 하는 것은 **x** 를 입력하면 됩니다. 수정 모드에서는 x를 입력하면 문자열 'x'가 입력되기 때문에 당연히 보기 모드에서 눌러야 동작합니다. 

특정 부분을 조작하는 경우, **x** 와 **i** 를 눌러가면서 어떤 부분을 지우고 내용을 채워넣는 것을 진행할 수 있습니다. 

#### 줄의 맨 끝에 입력

앞서 설명한 i(insert) 를 줄의 맨 끝에서 입력하면, 마지막 글자의 앞에 '삽입'되는 형태로 편집이 이루어집니다. 해당 줄의 마지막에 입력을 하고 싶을 때에는 ```shift``` + ```a``` 를 눌러 주면 커서가 위치한 줄의 맨 뒤에 입력을 할 수 있게 됩니다. 

#### 줄 복사

yaml, properties 등의 파일을 수정할 때에 가장 많이 사용하는 기능이 아닐까 싶습니다. 어떤 줄을 복사하여 아래에 붙여넣고 싶을 때, 해당 줄을 드래그하고 붙여넣기 하는 것은 번거롭습니다. 

복사하고 싶은 줄에서 **d + d** 를 누르고 붙여넣기 하고 싶은 줄에서 **p** 를 누르면 줄 복사가 됩니다. 

보통은 바로 아래에 붙여넣는 때에 빠르게 **ddp**를 입력함으로써 해당 기능을 유용하게 사용하고 있습니다. 

#### 찾아바꾸기

이 기능 정말 많이 사용하는 기능입니다. 설정 파일이든 뭐든, 찾아서 바꾸기를 하는 것이 vi 에서는 눈에 잘 들어오지도 않고 커서 이동도 힘든 편인데, 아래와 같이 입력해서 간단히 해결이 가능합니다. 

```bash
:%s/<찾을 문자열>/<바꿀 문자열>
```

예를 들어 ```aaa```를 찾아 ```bbb```로 바꾸고자 한다면, 

```bash
:%s/aaa/bbb
```

를 입력하면 됩니다.

## 참고

추가적인 단축키들이 많이 있으며, google 에 검색만 하더라도 많은 정보들을 수집할 수 있습니다. 아래 제가 찾았던 문서 하나를 공유드립니다. 더 찾아보면 유용한 정보들이 많이 있을겁니다.

https://wayhome25.github.io/etc/2017/03/27/vi/