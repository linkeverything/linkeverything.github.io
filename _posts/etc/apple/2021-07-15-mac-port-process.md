---
title: "맥에서 특정 포트를 사용하는 프로세스 확인"
categories: [mac]
tag: [process, port, lsof, netstat]
last_modified_at: 2021-07-15
---

프로그램을 사용할 때는 거의 그런 일들이 없지만, 개발을 하다 보면 특정 포트가 겹쳐서 실행이 되지 않는 경우가 있습니다. 이럴 때에는 해당 프로세스를 찾아서 kill 하고, 내가 원하는 프로그램을 다시 실행시키면 됩니다. 

그런데, 이 포트라는 것이, 한번 사용할 때에 OS 에서 할당받는 개념으로 되어 있고, 그래서 프로그램이 정상 종료되면 반환하게 되지만, 그렇지 않고 강제 종료되는 등의 일이 발생하면 포트가 사용중인 것 처럼 더 이상 사용할 수 없게 됩니다. 물론 이 경우 재부팅을 하고 나면 자연스럽게 사라지는 현상이지만, 개발을 하다가 재부팅을 빈번하게 할 수도 없는 상황이므로 아래 내용을 참고하면 좋습니다. 

## MacOS 는 Linux 명령어가 동작하니까

아마도 서버단 개발을 많이 진행한 분들이라면 `netstat` 이라는 명령어를 아주 잘 알고 계실겁니다. 최근에는 container 형태의 배포 형태가 많아졌기 때문에 그 중요성이 작아졌지만, 과거 하나의 머신(machine, VM)에 여러 개의 프로세스를 띄우는 경우 어떤 포트를 어느 프로세스가 사용하고 있는지 찾는 것은 매우 흔하고 중요한 일이었습니다. 

#### netstat 사용해보기

netstat 명령어는 리눅스 명령어로, 그야말로 네트워크(<mark style='background-color: #fff5b1'>net</mark>work)의 상태(<mark style='background-color: #fff5b1'>stat</mark>us) 를 체크하는 명령어입니다. 맥에서는 터미널이나 iterm같은 프로그램을 실행하고, 아래와 같이 입력합니다. 

```sh
$ netstat -anv | grep LISTEN 
```

```
tcp4       0      0  127.0.0.1.631          *.*                    LISTEN      131072 131072  26008      0 0x0080 0x00000006
tcp6       0      0  ::1.631                *.*                    LISTEN      131072 131072  26008      0 0x0080 0x00000006
tcp4       0      0  127.0.0.1.49315        *.*                    LISTEN      131072 131072    724      0 0x0100 0x00000002
tcp4       0      0  127.0.0.1.16107        *.*                    LISTEN      131072 131072    669      0 0x0100 0x00000006
tcp4       0      0  *.15018                *.*                    LISTEN      131072 131072    692      0 0x0000 0x00000006
tcp46      0      0  *.3283                 *.*                    LISTEN      131072 131072    528      0 0x0000 0x00000202
tcp6       0      0  *.49177                *.*                    LISTEN      131072 131072    397      0 0x0100 0x00000006
tcp4       0      0  *.49177                *.*                    LISTEN      131072 131072    397      0 0x0100 0x00000006
tcp4       0      0  127.0.0.1.2015         *.*                    LISTEN      131072 131072     70      0 0x0180 0x00000026
tcp4       0      0  *.88                   *.*                    LISTEN      131072 131072    116      0 0x0180 0x00000006
tcp6       0      0  *.88                   *.*                    LISTEN      131072 131072    116      0 0x0180 0x00000006
tcp6       0      0  fe80::aede:48ff:.49159 *.*                    LISTEN      131072 131072     77      0 0x0180 0x00000006
tcp6       0      0  fe80::aede:48ff:.49158 *.*                    LISTEN      131072 131072     77      0 0x0180 0x00000006
tcp6       0      0  fe80::aede:48ff:.49157 *.*                    LISTEN      131072 131072     77      0 0x0180 0x00000006
tcp6       0      0  fe80::aede:48ff:.49156 *.*                    LISTEN      131072 131072     77      0 0x0180 0x00000006
tcp6       0      0  fe80::aede:48ff:.49155 *.*                    LISTEN      131072 131072     77      0 0x0180 0x00000006
tcp6       0      0  fe80::aede:48ff:.49154 *.*                    LISTEN      131072 131072     77      0 0x0180 0x00000006
tcp4       0      0  *.5900                 *.*                    LISTEN      131072 131072      1      0 0x0180 0x00000006
tcp6       0      0  *.5900                 *.*                    LISTEN      131072 131072      1      0 0x0180 0x00000006
tcp4       0      0  *.22                   *.*                    LISTEN      131072 131072      1      0 0x0180 0x00000006
tcp6       0      0  *.22                   *.*                    LISTEN      131072 131072      1      0 0x0180 0x00000006
```

여기서 `-anv` 부분은 옵션으로서, 필요에 따라서 다양한 옵션을 이용해서 표현할 수 있고, grep 부분은 그 결과 중에서 어떤 문구가 포함된 부분만을 발췌하겠다는 의미입니다.
{: .notice--info} 


## 조금 다른 방향으로 찾아보자


## 출처 및 참고자료

- <https://woonizzooni.tistory.com/entry/Mac-listen-포트-pid-확인-방법-TCPUDP-세션-확인-방법>
- <https://new93helloworld.tistory.com/138>